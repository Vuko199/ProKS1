<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Class="ProKS1.Views.BookManagerWindow"
        x:CompileBindings="False"
        Title="Zarządzanie książkami"
        Width="1200" Height="780"
        WindowStartupLocation="CenterOwner">


	<Grid RowDefinitions="Auto,Auto,Auto,*,Auto" Margin="12">


		<Border Grid.Row="0" Background="#202020" CornerRadius="6" Padding="8" Margin="0,0,0,8">
			<StackPanel Orientation="Horizontal" Spacing="16">
				<TextBlock Text="{Binding VisibleBooks.Count, StringFormat='Książek (widocznych): {0}'}"/>
				<TextBlock Text="{Binding BooksPath, StringFormat='books.json: {0}'}"/>
				<Button Content="Odśwież" Command="{Binding RefreshCommand}" Margin="18,0,0,0"/>
			</StackPanel>
		</Border>


		<WrapPanel Grid.Row="1" ItemWidth="280" ItemHeight="56" Margin="0,0,0,8">
			<StackPanel Width="280">
				<TextBlock Text="Szukaj (tytuł lub autor)"/>
				<TextBox Text="{Binding QuickFilter}" Watermark="np. Lalka / Prus"/>
			</StackPanel>
			<StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Bottom">
				<Button Content="Filtruj" Command="{Binding ApplyQuickFilterCommand}"/>
				<Button Content="Wyczyść" Command="{Binding ClearQuickFilterCommand}"/>
			</StackPanel>
		</WrapPanel>


		<Border Grid.Row="2" Background="#151515" CornerRadius="6" Padding="10" Margin="0,0,0,8">
			<WrapPanel ItemWidth="220" ItemHeight="54">
				<StackPanel Width="260">
					<TextBlock Text="Tytuł*"/>
					<TextBox Text="{Binding NewTitle}" Watermark="np. Pan Tadeusz"/>
				</StackPanel>
				<StackPanel Width="220">
					<TextBlock Text="Autor"/>
					<TextBox Text="{Binding NewAuthor}"/>
				</StackPanel>
				<StackPanel Width="180">
					<TextBlock Text="Gatunek"/>
					<TextBox Text="{Binding NewGenre}"/>
				</StackPanel>
				<StackPanel Width="120">
					<TextBlock Text="Rok"/>
					<TextBox Text="{Binding NewYear}"/>
				</StackPanel>
				<StackPanel Width="200">
					<TextBlock Text="ISBN"/>
					<TextBox Text="{Binding NewIsbn}"/>
				</StackPanel>
				<StackPanel Width="120">
					<TextBlock Text="Egz."/>
					<TextBox Text="{Binding NewCopies}"/>
				</StackPanel>
				<StackPanel Orientation="Horizontal" VerticalAlignment="Bottom" Spacing="8">
					<Button Content="Dodaj" Command="{Binding AddNewCommand}"/>
					<TextBlock Text="{Binding NewError}" Foreground="Tomato" VerticalAlignment="Center"/>
				</StackPanel>
			</WrapPanel>
		</Border>

		<DataGrid Grid.Row="3"
				  ItemsSource="{Binding VisibleBooks}"
				  AutoGenerateColumns="False"
				  IsReadOnly="False"
				  HeadersVisibility="All"
				  SelectionMode="Single"
				  SelectedItem="{Binding SelectedBook}">
			<DataGrid.Columns>
				<DataGridTextColumn Header="ID"        Binding="{Binding Id}"           Width="70"  IsReadOnly="True"/>
				<DataGridTextColumn Header="Tytuł"     Binding="{Binding Title,  Mode=TwoWay}" Width="300"/>
				<DataGridTextColumn Header="Autor"     Binding="{Binding Author, Mode=TwoWay}" Width="220"/>
				<DataGridTextColumn Header="Gatunek"   Binding="{Binding Genre,  Mode=TwoWay}" Width="160"/>
				<DataGridTextColumn Header="Rok"       Binding="{Binding Year,   Mode=TwoWay}" Width="90"/>
				<DataGridTextColumn Header="ISBN"      Binding="{Binding Isbn,   Mode=TwoWay}" Width="200"/>
				<DataGridTextColumn Header="Egz."      Binding="{Binding CopiesTotal, Mode=TwoWay}" Width="80"/>
			</DataGrid.Columns>
		</DataGrid>

		<StackPanel Grid.Row="4" Orientation="Horizontal" Spacing="8" Margin="0,8,0,0">
			<Button Content="Zapisz zmiany" Command="{Binding SaveAllCommand}"/>
			<Button Content="Usuń zaznaczoną" Command="{Binding DeleteSelectedCommand}"/>
			<TextBlock Text="{Binding SaveInfo}" VerticalAlignment="Center" Margin="12,0,0,0"/>
		</StackPanel>

	</Grid>
</Window>
